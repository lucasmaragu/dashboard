<!DOCTYPE html>
<html lang="es" class="h-full bg-gray-900">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reportes - Dashboard Administrativo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }
      .float {
        animation: float 3s ease-in-out infinite;
      }
    </style>
  </head>
  <body class="h-full font-sf-mono text-gray-300">
    <div class="flex h-full">
        
        <aside id="sidebar" class="bg-gray-800 p-4 w-64 overflow-hidden transition-all duration-300">
          <div class="flex items-center space-x-2 mb-4">
            <img src="/monlau-fp-es.png" alt="Company Logo" class="w-8 h-8">
            <span class="text-white font-bold">Monlau</span>
          </div>
          <hr class="border-gray-700 mb-4">
        <nav class="space-y-4">
          <a
            href="index.html"
            class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-700"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
              ></path>
            </svg>
            <span>Dashboard</span>
          </a>
          <a
            href="reportes.html"
            class="flex items-center space-x-2 p-2 rounded-lg bg-gray-700"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
              ></path>
            </svg>
            <span>Reportes</span>
          </a>
          <a
            href="/usuarios.html"
            class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-700"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
              ></path>
            </svg>
            <span>Usuarios</span>
          </a>
          <a
            href="configuracion.html"
            class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-700"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
              ></path>
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
              ></path>
            </svg>
            <span>Configuración</span>
          </a>
        </nav>
      </aside>

      <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Header -->
        <header
          class="bg-gray-800 p-4 flex items-center rounded-b-lg space-x-4"
        >
          <button
            id="toggleSidebar"
            class="text-gray-300 hover:text-white focus:outline-none"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16m-7 6h7"
              ></path>
            </svg>
          </button>
          <div class="flex-1 max-w-xl">
            <input
              type="text"
              placeholder="Buscar..."
              class="w-full bg-gray-700 text-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ease-in-out"
            />
          </div>
          <div class="flex items-center space-x-4">
            <button class="relative">
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                ></path>
              </svg>
              <span
                class="absolute top-0 right-0 bg-red-500 rounded-full w-2 h-2"
              ></span>
            </button>
            <div class="relative">
              <button id="userMenuButton" class="flex items-center space-x-2">
                <img
                  class="w-8 h-8 rounded-full"
                  src="https://randomuser.me/api/portraits/men/75.jpg"
                  alt="Usuario"
                />
                <span>Usuario</span>
              </button>
              <div
                id="userMenu"
                class="hidden absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg py-2"
              >
                <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-700"
                  >Perfil</a
                >
                <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-700"
                  >Configuración</a
                >
                <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-700"
                  >Cerrar sesión</a
                >
              </div>
            </div>
          </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-6">
          <h1 class="text-3xl font-bold text-gray-100 mb-6">Reportes</h1>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="bg-gray-800 p-4 rounded-lg shadow reporte-card">
              <h3 class="text-lg font-semibold mb-2">Ingresos Totales</h3>
              <p class="text-4xl font-bold" id="totalIngresos">€0</p>
              <p class="text-green-400 mt-2">
                ↑ <span id="porcentajeIngresos">0</span>% vs mes anterior
              </p>
            </div>

            <div class="bg-gray-800 p-4 rounded-lg shadow reporte-card">
              <h3 class="text-lg font-semibold mb-2">Clientes Activos</h3>
              <p class="text-4xl font-bold" id="clientesActivos">0</p>
              <p class="text-green-400 mt-2">
                ↑ <span id="porcentajeClientesActivos">0</span>% vs mes anterior
              </p>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="bg-gray-800 p-4 rounded-lg shadow reporte-card">
              <h3 class="text-lg font-semibold mb-4">Ingresos Mensuales</h3>
              <canvas id="ingresosMensualesChart"></canvas>
            </div>

            <div class="bg-gray-800 p-4 rounded-lg shadow reporte-card">
              <h3 class="text-lg font-semibold mb-4">Distribución de Clientes</h3>
              <canvas id="distribucionClientesChart"></canvas>
            </div>
          </div>

          <div class="bg-gray-800 rounded-lg shadow reporte-card">
            <div class="p-4">
              <h3 class="text-lg font-semibold mb-4">Reporte Detallado de Ingresos</h3>
              <div class="flex justify-between items-center mb-4">
                <select
                  id="mesSelector"
                  class="bg-gray-700 text-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">Seleccionar mes</option>
                  <option value="enero">Enero</option>
                  <option value="febrero">Febrero</option>
                  <option value="marzo">Marzo</option>
                  <!-- Añadir más meses aquí -->
                </select>
                <button
                  id="descargarReporte"
                  class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-300"
                >
                  Descargar Reporte
                </button>
              </div>
              <div class="overflow-x-auto">
                <table class="w-full text-left">
                  <thead>
                    <tr class="border-b border-gray-700">
                      <th class="py-2">Producto</th>
                      <th class="py-2">Ingresos</th>
                      <th class="py-2">Clientes</th>
                    </tr>
                  </thead>
                  <tbody id="tablaIngresos">
                    <!-- Los datos de la tabla se llenarán dinámicamente con JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <script>
      // Animación de entrada para las tarjetas
      anime({
        targets: ".reporte-card",
        opacity: [0, 1],
        translateY: [20, 0],
        delay: anime.stagger(100),
        easing: "easeOutQuad",
        duration: 800,
      });

      // Función para formatear números como moneda
      function formatCurrency(number) {
        return new Intl.NumberFormat("es-ES", {
          style: "currency",
          currency: "EUR",
        }).format(number);
      }

      // Actualizar estadísticas con animación
      function animateValue(id, start, end, duration) {
        let current = start;
        const range = end - start;
        const increment = end > start ? 1 : -1;
        const stepTime = Math.abs(Math.floor(duration / range));
        const obj = document.getElementById(id);
        const timer = setInterval(() => {
          current += increment;
          obj.textContent = current;
          if (current == end) {
            clearInterval(timer);
          }
        }, stepTime);
      }

      // Actualizar estadísticas
      document.getElementById("totalIngresos").textContent =
        formatCurrency(500000);
      animateValue("porcentajeIngresos", 0, 15, 1000);
      animateValue("clientesActivos", 0, 200, 1500);
      animateValue("porcentajeClientesActivos", 0, 10, 1000);

      // Gráfico de Ingresos Mensuales
      const ingresosMensualesCtx = document
        .getElementById("ingresosMensualesChart")
        .getContext("2d");
      new Chart(ingresosMensualesCtx, {
        type: "line",
        data: {
          labels: [
            "Ene",
            "Feb",
            "Mar",
            "Abr",
            "May",
            "Jun",
            "Jul",
            "Ago",
            "Sep",
            "Oct",
            "Nov",
            "Dic",
          ],
          datasets: [
            {
              label: "Ingresos Mensuales",
              data: [
                40000, 45000, 50000, 55000, 60000, 65000, 70000, 75000, 80000,
                85000, 90000, 95000,
              ],
              backgroundColor: "rgba(54, 162, 235, 0.6)",
              borderColor: "rgba(54, 162, 235, 1)",
              borderWidth: 1,
              fill: true,
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function (value) {
                  return "€" + value.toLocaleString();
                },
              },
            },
          },
        },
      });

      // Gráfico de Distribución de Clientes
      const distribucionClientesCtx = document
        .getElementById("distribucionClientesChart")
        .getContext("2d");
      new Chart(distribucionClientesCtx, {
        type: "pie",
        data: {
          labels: [
            "Cliente A",
            "Cliente B",
            "Cliente C",
            "Cliente D",
            "Cliente E",
          ],
          datasets: [
            {
              data: [40, 30, 15, 10, 5],
              backgroundColor: [
                "rgba(255, 99, 132, 0.8)",
                "rgba(54, 162, 235, 0.8)",
                "rgba(255, 206, 86, 0.8)",
                "rgba(75, 192, 192, 0.8)",
                "rgba(153, 102, 255, 0.8)",
              ],
              borderColor: [
                "rgba(255, 99, 132, 1)",
                "rgba(54, 162, 235, 1)",
                "rgba(255, 206, 86, 1)",
                "rgba(75, 192, 192, 1)",
                "rgba(153, 102, 255, 1)",
              ],
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: "right",
            },
            title: {
              display: true,
              text: "Distribución de Clientes",
            },
          },
        },
      });

      // Datos de ejemplo para la tabla de ingresos
      const datosIngresos = [
        { producto: "Producto A", ingresos: 123400, clientes: 50 },
        { producto: "Producto B", ingresos: 98700, clientes: 40 },
        { producto: "Producto C", ingresos: 75600, clientes: 30 },
        { producto: "Producto D", ingresos: 54300, clientes: 20 },
        { producto: "Producto E", ingresos: 32100, clientes: 10 },
      ];

      // Función para llenar la tabla de ingresos
      function llenarTablaIngresos(datos) {
        const tablaIngresos = document.getElementById("tablaIngresos");
        tablaIngresos.innerHTML = "";
        datos.forEach((item) => {
          const fila = document.createElement("tr");
          fila.innerHTML = `
                    <td class="py-2">${item.producto}</td>
                    <td class="py-2">${formatCurrency(item.ingresos)}</td>
                    <td class="py-2">${item.clientes.toLocaleString()}</td>
                `;
          tablaIngresos.appendChild(fila);
        });
      }

      // Llenar la tabla inicialmente
      llenarTablaIngresos(datosIngresos);

      // Evento para el selector de mes
      document
        .getElementById("mesSelector")
        .addEventListener("change", function () {
          // Aquí se simularía la carga de datos para el mes seleccionado
          // Por ahora, solo recargamos los mismos datos
          llenarTablaIngresos(datosIngresos);
        });

      // Evento para el botón de descarga
      document
        .getElementById("descargarReporte")
        .addEventListener("click", function () {
          alert("Descargando reporte...");
          // Aquí se implementaría la lógica real de descarga
        });

      // Toggle del menú de usuario
      const userMenuButton = document.getElementById("userMenuButton");
      const userMenu = document.getElementById("userMenu");
      userMenuButton.addEventListener("click", () => {
        userMenu.classList.toggle("hidden");
      });

      // Cerrar el menú de usuario al hacer clic fuera
      document.addEventListener("click", (event) => {
        if (
          !userMenuButton.contains(event.target) &&
          !userMenu.contains(event.target)
        ) {
          userMenu.classList.add("hidden");
        }
      });

      const toggleSidebar = document.getElementById('toggleSidebar');
      const sidebar = document.getElementById('sidebar');

      toggleSidebar.addEventListener('click', () => {
        sidebar.classList.toggle('w-64');
        sidebar.classList.toggle('w-0');
      });
    </script>
  </body>
</html>
